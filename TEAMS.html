<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชูุฒูุน ุงููุชุฏุฑุจูู ูุฅุฏุงุฑุฉ ุงููุฑู</title>
    <script src="https://cdn.tailwindcss.com"></script>
	<script src="js/xml.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Cairo', sans-serif;
            background-color: #f7f9fb;
            overflow-y: auto;
        }

        .team-card {
            background-color: white;
            padding: 1rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 2px solid; /* ููู ุงููุฑูู - ูุญุฏ ุฎุงุฑุฌู ูููุฑุช */
            min-height: 150px;
        }

        .member-item {
            cursor: grab;
            transition: transform 0.1s ease;
            user-select: none;
            color: #ffffff; /* ููู ุงููุต ูุจูู ุฃุจูุถ */
            border-radius: 9999px; /* ุดูู ุฏุงุฆุฑู ุฃูุซุฑ ูุถูุญุงู */
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .member-item:active {
            cursor: grabbing;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            z-index: 10;
        }

        .drag-over {
            border: 2px dashed #3b82f6;
            background-color: #eff6ff;
        }
		/* ููุงุณ ุงูุฒุฑ ุงูุนุงุฆู */
        .fab-container {
            position: fixed;
            bottom: 0rem; /* 24px */
            left: 1.5rem; /* 24px - ููุชูุงุณุจ ูุน RTL */
            z-index: 50; /* ุชุฃูุฏ ุฃูู ูุธูุฑ ููู ุงูุนูุงุตุฑ ุงูุฃุฎุฑู */
        }
    </style>
</head>
<body class=" md:p-4">

    <div class="max-w-12xl w-full mx-auto">
        <div class="bg-white shadow-2xl rounded-xl p-6 md:p-4 border-t-8 border-indigo-600">
            <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-2 text-center" style="background-image: url(&quot;gigapixel-background-removed-1384.png&quot;);background-size: contain;background-repeat: no-repeat;background-position: right;">
                ๐๏ธ ุฃุฏุงุฉ ุชูุฒูุน ุงููุชุฏุฑุจูู ุนูู ุงููุฑู
            </h1>
            
<div class="fab-container">
        <button id="openChangeFileModalBtn" 
                class="px-6 py-3 bg-indigo-600 text-white font-bold rounded-full shadow-2xl hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center space-x-2 space-x-reverse" 
                onclick="toggleTeamsModal(true)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>
            <span>ุชุบููุฑ ููู ุงููุฑู</span>
        </button>
    </div>
	<!-- ============================================== -->
    <!-- ุงููุงูุฐุฉ ุงูููุจุซูุฉ (Modal) ูุชุบููุฑ ููู ุงููุฑู -->
    <!-- ============================================== -->
    <div id="teamFileModal" class="modal fixed inset-0 flex items-center justify-center p-4 hidden">
        <div class="modal-content bg-white p-6 rounded-xl shadow-2xl w-full max-w-md transition-all duration-300">
            <h3 class="text-2xl font-extrabold text-gray-800 mb-4 border-b pb-2">ุชุญููู ูุชุญุฏูุซ ุจูุงูุงุช ุงููุฑู</h3>
            <p class="text-gray-600 mb-4">ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ููู XML ูุถู ูููู ุงููุฑู ูุงูุฃุนุถุงุก. ุณูุชู ุญูุธ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุจูุงูุงุช IndexedDB.</p>
            
            <label for="teamFileUploadInput" 
                   class="file-input-label flex items-center justify-center space-x-2 space-x-reverse bg-gray-100 border-2 border-dashed border-gray-400 p-4 rounded-lg hover:bg-gray-200">
                <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"></path></svg>
                <span class="text-lg font-semibold text-gray-700">ุงุฎุชุฑ ููู ุงููุฑู (XML)</span>
            </label>
            <input type="file" id="teamFileUploadInput" accept=".xml" class="hidden" onchange="handleTeamFileUpload(event)">
            
            <p id="modalFileStatus" class="mt-4 p-3 bg-yellow-100 text-yellow-800 rounded-lg text-sm text-right">ูู ูุชู ุงุฎุชูุงุฑ ุฃู ููู.</p>
            
            <div class="mt-6 flex justify-end space-x-3 space-x-reverse">
                <button id="saveAndCloseBtn" disabled class="px-5 py-2 bg-green-500 text-white font-bold rounded-lg shadow hover:bg-green-600 disabled:opacity-50" onclick="showAll()">
                    ุนุฑุถ ุงููุฑู
                </button>
                <button type="button" class="px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300" onclick="toggleTeamsModal(false)">
                    ุฅูุบุงุก
                </button>
            </div>
        </div>
    </div>
            <!-- 1. Input Section -->
            <div class="mb-8 p-1 bg-indigo-50 rounded-lg border-2 border-indigo-200">
                <h2 class="text-2xl font-bold text-indigo-700 mb-4">ุจูุงูุงุช ุงูุฅุฏุฎุงู</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <label for="traineeNames" class="block text-sm font-medium text-gray-700 mb-1">ุฃุณูุงุก ุงููุชุฏุฑุจูู (ุงุณู ูู ูู ุณุทุฑ)</label>
                        <textarea id="traineeNames" rows="6" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-sm" placeholder="ูุซุงู:&#13;&#10;ุนูู ูุญูุฏ&#13;&#10;ูุงุทูุฉ ุฃุญูุฏ&#13;&#10;ุนูุฑ ุฎุงูุฏ&#13;&#10;ุณููู ููุณู">
ุนูู ูุญูุฏ
ูุงุทูุฉ ุฃุญูุฏ
ุนูุฑ ุฎุงูุฏ
ุณููู ููุณู
ููุฑ ุฃููู
ุจุงุณู ุฅููุงุจ
ูุฑูู ุณุงูู
ููุณู ุญุงุชู
</textarea>
                    </div>
                    <div>
                        <label for="numTeams" class="block text-sm font-medium text-gray-700 mb-1">ุนุฏุฏ ุงููุฑู ุงููุทููุจุฉ</label>
                        <input type="number" id="numTeams" value="2" min="1" class="w-full p-3 border border-indigo-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-lg mb-4" />
                        
                        <button onclick="shuffleAndRenderTeams()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg transition duration-200 text-lg shadow-md">
                            ุชูุฒูุน ุนุดูุงุฆู
                        </button>
                    </div>
                </div>
            </div>

            <!-- 2. Team Display and Drag & Drop Area -->
            <div id="teamsDisplayArea" class="mb-1">
                <h2 class="text-2xl font-bold text-gray-800 mb-1 border-b pb-2">ุชุดูููุฉ ุงููุฑู (ูููู ุงูุชุนุฏูู ุจุงูุณุญุจ ูุงูุฅููุงุช)</h2>
                <div id="teamsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- ูุชู ุฅุฏุฎุงู ูุฑูุช ุงููุฑู ููุง ุจูุงุณุทุฉ JavaScript -->
                    <p class="text-gray-500 text-center col-span-full" id="initialMessage">ุฃุฏุฎู ุงูุฃุณูุงุก ูุงุถุบุท "ุชูุฒูุน ุนุดูุงุฆู" ููุจุฏุก.</p>
                </div>
            </div>

            <!-- 3. Save to XML Section -->
            <div class="p-6 bg-green-50 rounded-lg border-2 border-green-200">
                <h2 class="text-2xl font-bold text-green-700 mb-4 flex justify-between items-center">
                    ุญูุธ ุงูุชุดูููุฉ ุงูููุงุฆูุฉ ูููู XML
                    <button onclick="generateXMLOutput()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 text-sm shadow-md">
                        ุชูููุฏ XML ุงูุขู
                    </button>
                </h2>
                <div id="xmlOutputContainer" class="hidden">
                    <textarea id="xmlOutput" rows="10" readonly class="w-full p-3 mt-2 border border-green-300 rounded-lg font-mono text-sm resize-none"></textarea>
                    <p class="text-xs text-green-700 mt-2">ุงูุณุฎ ุงููุญุชูู ุฃุนูุงู ูุงุญูุธู ูู ููู ุจุงุณู `team_data.xml`.</p>
                </div>
            </div>

        </div>
    </div>

    <script>
        // ุงููุชุบูุฑุงุช ุงูุนุงูููุฉ ููุญุงูุฉ
        let teamsData = [];
        
        // ูุงุฆูุฉ ุฃููุงู ุงููุฑู (ูุญุฏูุฏ ุงููุฑุช ููุท)
        const TEAM_COLORS = [
            '#4169E1', '#2ECC71', '#FFC107', '#DC143C', 
            '#3F51B5', '#00897B', '#E91E63', '#607D8B'  ,'#FF7043','#673AB7'
        ];
        
        // ูุงุฆูุฉ ุงูุฃููุงู ุงููุฑุฏูุฉ ููุฃุนุถุงุก (ูุชูููู ุจุทุงูุฉ ุงูุนุถู)
        const INDIVIDUAL_COLORS = [
            '#4299e1', '#f6ad55', '#38b2ac', '#d53f8c', '#667eea', 
            '#ed8936', '#319795', '#a0aec0', '#9f7aea', '#48bb78',
            '#ecc94b', '#e53e3e', '#718096', '#2d3748', '#805ad5',
            '#007bff', '#ffc107', '#28a745', '#dc3545', '#6c757d'
        ];

        const TEAM_NAMES = ['ุงููุฑุณุงู', 'ุงูุฑูุงุฏ', 'ุงููุฌูู', 'ุงูุฃุจุทุงู', 'ุงูุนุธูุงุก', 'ุงููุงุฆุฒูู', 'ุงูุนุจุงูุฑุฉ', 'ุงููุงุฏุฉ','ุงููุญุชุฑููู','ุงููููุฑ','ุงูุตููุฑ','ุงูุนุงุตูุฉ','ุงูุจุฑู','ุงูุฏุฑุน','ุงูุฑูุญ'];

        // --- ูุธุงุฆู ุงููุณุงุนุฏุฉ ุงูุนุงูุฉ ---

        /**
         * ุฏุงูุฉ ูุฎูุท ูุตูููุฉ ุจุดูู ุนุดูุงุฆู (Fisher-Yates Shuffle).
         * @param {Array} array - ุงููุตูููุฉ ุงููุฑุงุฏ ุฎูุทูุง.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        
        /**
         * ุฏุงูุฉ ููุญุตูู ุนูู ููู ุนุดูุงุฆู ูุฑูุฏ ููู ูุชุฏุฑุจ.
         * ุชุณุชุฎุฏู ูุชูุฒูุน ุงูุฃููุงู ุงูุนุดูุงุฆูุฉ ุนูู ุงููุชุฏุฑุจูู ุงูุฌุฏุฏ.
         * @param {number} index - ูุคุดุฑ ุงููุชุฏุฑุจ.
         */
        function getIndividualColor(index) {
            return INDIVIDUAL_COLORS[index % INDIVIDUAL_COLORS.length];
        }

        // --- ูุธุงุฆู ุฅุฏุงุฑุฉ ุงููุฑู ูุงูุชูุฒูุน ---

        /**
         * ุชูุฑุฃ ุงูุฃุณูุงุก ูุชูุฒุนูุง ุนุดูุงุฆูุงู ุนูู ุนุฏุฏ ูุญุฏุฏ ูู ุงููุฑู.
         */
        function shuffleAndRenderTeams() {
            const namesText = document.getElementById('traineeNames').value;
            const numTeams = parseInt(document.getElementById('numTeams').value) || 1;
            
            // ุชูููุฉ ุงูุฃุณูุงุก ูุฅุนุทุงุก ูู ูุชุฏุฑุจ ููู ูุฑุฏู ุซุงุจุช
            let allTrainees = namesText.split('\n')
                .map(name => name.trim())
                .filter(name => name.length > 0)
                .map((name, index) => ({ 
                    id: `m${index + 1}`, 
                    name, 
                    // ุชุฎุตูุต ููู ุซุงุจุช ููู ุนุถู
                    individualColor: getIndividualColor(index) 
                }));

            if (allTrainees.length === 0) {
                console.error('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุฃุณูุงุก ุงููุชุฏุฑุจูู ุฃููุงู.');
                return;
            }
            if (numTeams < 1) {
                console.error('ูุฌุจ ุฃู ูููู ุนุฏุฏ ุงููุฑู ูุฑููุงู ูุงุญุฏุงู ุนูู ุงูุฃูู.');
                return;
            }

            // ุฎูุท ุงููุชุฏุฑุจูู
            shuffleArray(allTrainees);
			let colorsShuffled = [...TEAM_COLORS];
			shuffleArray(colorsShuffled);

            // ุฅูุดุงุก ููุงูู ุงููุฑู
            teamsData = [];
            for (let i = 0; i < numTeams; i++) {
                teamsData.push({
                    id: `t${i + 1}`,
                    name: TEAM_NAMES[i % TEAM_NAMES.length] + (i >= TEAM_NAMES.length ? ` ${i + 1}` : ''),
                    //color: TEAM_COLORS[i % TEAM_COLORS.length], // ูุฐุง ูู ููู ุญุฏูุฏ ูุฑุช ุงููุฑูู
					color: colorsShuffled[i % colorsShuffled.length],
                    members: []
                });
            }

            // ุชูุฒูุน ุงููุชุฏุฑุจูู ุจุงูุชูุงูุจ
            allTrainees.forEach((trainee, index) => {
                const teamIndex = index % numTeams;
                teamsData[teamIndex].members.push(trainee);
            });

            // ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู
            renderTeams();
        }

        /**
         * ุชุฑุณู ูุฑูุช ุงููุฑู ูุงูุฃุนุถุงุก ุนูู ุงูุดุงุดุฉ.
         */
        function renderTeams() {
            const container = document.getElementById('teamsContainer');
            const initialMessage = document.getElementById('initialMessage');
            
            container.innerHTML = '';
            
            // ุฅุตูุงุญ ุงูุฎุทุฃ: ูุฌุจ ุงูุชุญูู ูู ูุฌูุฏ ุงูุนูุตุฑ ูุจู ูุญุงููุฉ ุงููุตูู ุฅูู ุฎุตุงุฆุตู
            if (initialMessage) {
                initialMessage.classList.add('hidden');
            }

            teamsData.forEach(team => {
                const teamCard = document.createElement('div');
                teamCard.className = 'team-card';
                teamCard.id = team.id;
                teamCard.style.borderColor = team.color; // ุงุณุชุฎุฏุงู ููู ุงููุฑูู ููุญุฏูุฏ
                teamCard.setAttribute('data-color', team.color);

                // ุฅุถุงูุฉ ูุนุงูุฌุงุช ุงูุณุญุจ ูุงูุฅููุงุช ูููุงุทู ุงูุฅููุงุช (Teams)
                teamCard.ondragover = allowDrop;
                teamCard.ondrop = dropMember;

                // ุนููุงู ุงููุฑูู ูุน ุฅููุงููุฉ ุชุนุฏูู ุงูุงุณู ูุงูููู
                const header = document.createElement('div');
                header.className = 'flex justify-between items-center mb-4 pb-2 border-b';
                
                header.innerHTML = `
                    <input type="text" value="${team.name}" class="font-extrabold text-xl text-gray-800 bg-transparent focus:outline-none focus:ring-1 focus:ring-indigo-300 rounded-md p-1" onchange="updateTeamName('${team.id}', this.value)">
                    <input type="color" value="${team.color}" class="w-8 h-8 border-none rounded-full cursor-pointer" onchange="updateTeamColor('${team.id}', this.value)">
                `;

                teamCard.appendChild(header);

                // ููุทูุฉ ุงูุฃุนุถุงุก (Members)
                const membersDiv = document.createElement('div');
                membersDiv.className = 'flex flex-wrap gap-2';
                
                team.members.forEach(member => {
                    // ููุฑุฑ ุงูููู ุงููุฑุฏู ููุนุถู
                    const memberElement = createMemberElement(member, member.individualColor);
                    membersDiv.appendChild(memberElement);
                });

                teamCard.appendChild(membersDiv);
                container.appendChild(teamCard);
            });
        }
        
        /**
         * ุชูุดุฆ ุนูุตุฑ ุงูุนุถู ุงููุงุจู ููุณุญุจ.
         * @param {Object} member - ุจูุงูุงุช ุงูุนุถู.
         * @param {string} individualColor - ููู ุงูุนุถู ุงููุฑุฏู.
         * @returns {HTMLElement}
         */
        function createMemberElement(member, individualColor) {
            const memberElement = document.createElement('span');
            memberElement.className = 'member-item px-3 py-1 text-sm font-semibold text-gray-700 hover:opacity-90 transition duration-150';
            memberElement.textContent = member.name;
            memberElement.id = member.id;
            memberElement.draggable = true;
            
            // ุงุณุชุฎุฏุงู ุงูููู ุงููุฑุฏู ููุนุถู ูุชูููู ุงูุฎูููุฉ
            memberElement.style.backgroundColor = individualColor; 
            memberElement.style.color = '#ffffff'; // ููู ุงููุต ุงูุฃุจูุถ

            // ุชุฎุฒูู ุจูุงูุงุช ุงูุนุถู ูุฎุตุงุฆุต ุจูุงูุงุช HTML
            memberElement.setAttribute('data-member-name', member.name);
            memberElement.setAttribute('data-individual-color', individualColor);

            // ุฅุถุงูุฉ ูุนุงูุฌุงุช ุงูุณุญุจ
            memberElement.ondragstart = dragMember;
            return memberElement;
        }


        // --- ูุธุงุฆู ุงูุชุนุฏูู ุงููุฏูู (ุงูุณุญุจ ูุงูุฅููุงุช) ---

        /**
         * ุนูุฏ ุจุฏุก ุณุญุจ ุงูุนุถู.
         */
        function dragMember(ev) {
            // ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงููุงุจูุฉ ููููู (ID ููุนุถู)
            ev.dataTransfer.setData("memberId", ev.target.id);
            // ุฅุถุงูุฉ ุงูุจูุงูุงุช ุงููุงุจูุฉ ููููู (ID ูููุฑูู ุงููุตุฏุฑ)
            ev.dataTransfer.setData("sourceTeamId", ev.target.closest('.team-card').id);
        }

        /**
         * ุงูุณูุงุญ ุจุงูุฅููุงุช ูู ููุงุทู ุงููุฑู.
         */
        function allowDrop(ev) {
            ev.preventDefault();
            // ุฅุถุงูุฉ ุชุฃุซูุฑ ูุฑุฆู ูููุงุทู ุงูุฅููุงุช
            const teamCard = ev.target.closest('.team-card');
            if (teamCard) {
                teamCard.classList.add('drag-over');
            }
        }

        /**
         * ุฅุฒุงูุฉ ุชุฃุซูุฑ ุงูุณุญุจ ุนูุฏ ูุบุงุฏุฑุฉ ููุทูุฉ ุงูุฅููุงุช.
         */
        document.addEventListener('dragenter', (ev) => {
            if (ev.target.closest('.team-card')) {
                ev.target.closest('.team-card').classList.add('drag-over');
            }
        });

        document.addEventListener('dragleave', (ev) => {
            // ุฅุฒุงูุฉ ุงูููุงุณ ููุท ุฅุฐุง ุบุงุฏุฑ ุงูุนูุตุฑ ุงููุนูู ููุทูุฉ ุงูุฅููุงุช
            const related = ev.relatedTarget;
            const targetCard = ev.target.closest('.team-card');
            
            if (targetCard && (!related || !related.closest('.team-card') || related.closest('.team-card').id !== targetCard.id)) {
                targetCard.classList.remove('drag-over');
            }
        });

        document.addEventListener('dragend', (ev) => {
             document.querySelectorAll('.team-card').forEach(card => card.classList.remove('drag-over'));
        });


        /**
         * ุนูุฏ ุฅููุงุช ุงูุนุถู ูู ูุฑูู ุฌุฏูุฏ.
         */
        function dropMember(ev) {
            ev.preventDefault();
            document.querySelectorAll('.team-card').forEach(card => card.classList.remove('drag-over'));

            const memberId = ev.dataTransfer.getData("memberId");
            const sourceTeamId = ev.dataTransfer.getData("sourceTeamId");
            const destinationTeamCard = ev.target.closest('.team-card');
            
            // ุชุญูู ูู ูุฌูุฏ ุงูุจุทุงูุฉ ุงููุฌูุฉ
            if (!destinationTeamCard) return; 
            
            const destinationTeamId = destinationTeamCard.id;

            if (sourceTeamId === destinationTeamId) return; // ููุณ ุงููุฑููุ ูุง ุชูุนู ุดูุฆุงู

            // 1. ุฅุฒุงูุฉ ุงูุนุถู ูู ุงููุฑูู ุงููุตุฏุฑ ูู ุจูุงูุงุช ุงูุญุงูุฉ (teamsData)
            let memberToMove = null;
            const sourceTeam = teamsData.find(t => t.id === sourceTeamId);
            
            if (sourceTeam) {
                const memberIndex = sourceTeam.members.findIndex(m => m.id === memberId);
                if (memberIndex !== -1) {
                    memberToMove = sourceTeam.members.splice(memberIndex, 1)[0];
                }
            }

            // 2. ุฅุถุงูุฉ ุงูุนุถู ุฅูู ุงููุฑูู ุงููุฌูุฉ ูู ุจูุงูุงุช ุงูุญุงูุฉ (teamsData)
            if (memberToMove) {
                const destinationTeam = teamsData.find(t => t.id === destinationTeamId);
                if (destinationTeam) {
                    destinationTeam.members.push(memberToMove);
                }
            }

            // 3. ุฅุนุงุฏุฉ ุฑุณู ุงููุงุฌูุฉ ูุชุนูุณ ุงูุชุบููุฑ ูุงูุฃููุงู ุงูุฌุฏูุฏุฉ
            renderTeams();
        }

        /**
         * ุชุญุฏูุซ ุงุณู ุงููุฑูู ูู ุจูุงูุงุช ุงูุญุงูุฉ.
         */
        function updateTeamName(teamId, newName) {
            const team = teamsData.find(t => t.id === teamId);
            if (team) {
                team.name = newName;
                console.log(`Team ${teamId} name updated to ${newName}`);
            }
        }

        /**
         * ุชุญุฏูุซ ููู ุงููุฑูู ูู ุจูุงูุงุช ุงูุญุงูุฉ ูุฅุนุงุฏุฉ ุงูุฑุณู.
         */
        function updateTeamColor(teamId, newColor) {
            const team = teamsData.find(t => t.id === teamId);
            if (team) {
                team.color = newColor;
                // ูุฌุจ ุฅุนุงุฏุฉ ุงูุฑุณู ูุถูุงู ุชุญุฏูุซ ููู ุงูุญุฏูุฏ
                renderTeams(); 
                console.log(`Team ${teamId} color updated to ${newColor}`);
            }
        }


		// ุชููุฆุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
        document.addEventListener('DOMContentLoaded', () => {
			// 1. ุฌูุจ ุงูุจูุงูุงุช ูู LocalStorage
			const savedData = localStorage.getItem('teamDataXML');
			let result=JSON.parse(savedData)
			result=result.data
			result = parseAndValidateXml(result);
			TEMP_TEAMS_DATA=result.data;
			showAll()
		});


    </script>
</body>
</html>